{"ast":null,"code":"var _jsxFileName = \"/Users/musubimanagement/Documents/WEB/SD_Hunger_Captian/techis-wd-forum-django-react/frontend/src/containers/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const dispatch = useDispatch();\n  const selector = useSelector(state => state);\n  const posts = getPosts(selector);\n  let [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    dispatch(fetchPosts({\n      page\n    })); // eslint-disable-next-line\n  }, []); // Infinite Scroll Pagination Flow\n\n  const observer = useRef(); // Reference to a very last post element\n\n  const lastPostElement = useCallback(node => {\n    if (isLoading) return; // Disconnect reference from previous element, so that new last element is hook up correctly\n\n    if (observer.current) {\n      observer.current.disconnect();\n    } // Observe changes in the intersection of target element\n\n\n    observer.current = new IntersectionObserver(async entries => {\n      // That means that we are on the page somewhere, In our case last element of the page\n      if (entries[0].isIntersecting && posts.next) {\n        // Proceed fetch new page\n        setIsLoading(true);\n        setPage(++page);\n        await dispatch(fetchPosts({\n          page\n        }));\n        setIsLoading(false);\n      }\n    }); // Reconnect back with the new last post element\n\n    if (node) {\n      observer.current.observe(node);\n    }\n  }, // eslint-disable-next-line\n  [posts.next]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Mohan\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 10\n  }, this);\n};\n\n_s(Home, \"tf63ety61+BXkOMtutks0bOWBUA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useCallback","useEffect","useRef","useState","useDispatch","useSelector","Home","dispatch","selector","state","posts","getPosts","page","setPage","isLoading","setIsLoading","fetchPosts","observer","lastPostElement","node","current","disconnect","IntersectionObserver","entries","isIntersecting","next","observe"],"sources":["/Users/musubimanagement/Documents/WEB/SD_Hunger_Captian/techis-wd-forum-django-react/frontend/src/containers/Home.jsx"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\n\nconst Home = () => {\n    const dispatch = useDispatch();\n    const selector = useSelector(state => state);\n    const posts = getPosts(selector);\n    let [page, setPage] = useState(1);\n    const [isLoading, setIsLoading] = useState(false);\n\n    useEffect(() => {\n        dispatch(fetchPosts({ page }));\n        // eslint-disable-next-line\n    }, []);\n\n    // Infinite Scroll Pagination Flow\n    const observer = useRef();\n\n    // Reference to a very last post element\n    const lastPostElement = useCallback(\n        node => {\n            if (isLoading) return;\n            // Disconnect reference from previous element, so that new last element is hook up correctly\n            if (observer.current) {\n                observer.current.disconnect();\n            }\n\n            // Observe changes in the intersection of target element\n            observer.current = new IntersectionObserver(async entries => {\n                // That means that we are on the page somewhere, In our case last element of the page\n                if (entries[0].isIntersecting && posts.next) {\n                    // Proceed fetch new page\n                    setIsLoading(true);\n                    setPage(++page);\n                    await dispatch(fetchPosts({ page }));\n                    setIsLoading(false);\n                }\n            });\n\n            // Reconnect back with the new last post element\n            if (node) {\n                observer.current.observe(node);\n            }\n        },\n        // eslint-disable-next-line\n        [posts.next]\n    );\n\n    return (\n         <div>Mohan</div>\n    );\n};\n\nexport default Home;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,MAAxC,EAAgDC,QAAhD,QAAgE,OAAhE;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;;;AAGA,MAAMC,IAAI,GAAG,MAAM;EAAA;;EACf,MAAMC,QAAQ,GAAGH,WAAW,EAA5B;EACA,MAAMI,QAAQ,GAAGH,WAAW,CAACI,KAAK,IAAIA,KAAV,CAA5B;EACA,MAAMC,KAAK,GAAGC,QAAQ,CAACH,QAAD,CAAtB;EACA,IAAI,CAACI,IAAD,EAAOC,OAAP,IAAkBV,QAAQ,CAAC,CAAD,CAA9B;EACA,MAAM,CAACW,SAAD,EAAYC,YAAZ,IAA4BZ,QAAQ,CAAC,KAAD,CAA1C;EAEAF,SAAS,CAAC,MAAM;IACZM,QAAQ,CAACS,UAAU,CAAC;MAAEJ;IAAF,CAAD,CAAX,CAAR,CADY,CAEZ;EACH,CAHQ,EAGN,EAHM,CAAT,CAPe,CAYf;;EACA,MAAMK,QAAQ,GAAGf,MAAM,EAAvB,CAbe,CAef;;EACA,MAAMgB,eAAe,GAAGlB,WAAW,CAC/BmB,IAAI,IAAI;IACJ,IAAIL,SAAJ,EAAe,OADX,CAEJ;;IACA,IAAIG,QAAQ,CAACG,OAAb,EAAsB;MAClBH,QAAQ,CAACG,OAAT,CAAiBC,UAAjB;IACH,CALG,CAOJ;;;IACAJ,QAAQ,CAACG,OAAT,GAAmB,IAAIE,oBAAJ,CAAyB,MAAMC,OAAN,IAAiB;MACzD;MACA,IAAIA,OAAO,CAAC,CAAD,CAAP,CAAWC,cAAX,IAA6Bd,KAAK,CAACe,IAAvC,EAA6C;QACzC;QACAV,YAAY,CAAC,IAAD,CAAZ;QACAF,OAAO,CAAC,EAAED,IAAH,CAAP;QACA,MAAML,QAAQ,CAACS,UAAU,CAAC;UAAEJ;QAAF,CAAD,CAAX,CAAd;QACAG,YAAY,CAAC,KAAD,CAAZ;MACH;IACJ,CATkB,CAAnB,CARI,CAmBJ;;IACA,IAAII,IAAJ,EAAU;MACNF,QAAQ,CAACG,OAAT,CAAiBM,OAAjB,CAAyBP,IAAzB;IACH;EACJ,CAxB8B,EAyB/B;EACA,CAACT,KAAK,CAACe,IAAP,CA1B+B,CAAnC;EA6BA,oBACK;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QADL;AAGH,CAhDD;;GAAMnB,I;UACeF,W,EACAC,W;;;KAFfC,I;AAkDN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}